# ****ΤΙΤΛΟΣ PROJECT : TROLLEY PROBLEM****
***

## Περιγραφή
Το πρόγραμμα αυτό υλοποιεί την συμπεριφορά ενός τρόλλεϋ το οποίο θα κινηθεί είτε προς τα αριστερά είτε προς τα δεξιά ανάλογα με τον αριθμό των ανθρώπων που βρίσκονται σε κάθε κατεύθυνση. Στην συγκεκριμένη περίπτωση προτιμάτε η κατεύθυνση όπου βρίσκονται τα λιγότερα άτομα. Πιο αναλυτικά, το πρόγραμμα αυτό είναι γραμμένο σε γλώσσα C και ζητάει από τον χρήστη τα κόστη δύο κατευθύνσεων (δεξιά και αριστερή κατεύθυνση). Έπειτα τα συγκρίνει για να επιλέξει την πορεία με το χαμηλότερο κόστος, δηλαδή εκείνη την πορεία-διαδρομή που συμφέρει περισσότερο την οποία τυπώνει στην συνέχεια στην οθόνη. Σε περίπτωση που δοθούν ίδιες τιμές το πρόγραμμα επιλέγει την αριστερή κατεύθυνση. Η εκφώνηση του συγκεκριμένου πρότζεκτ βρίσκεται [εδώ](https://progintro.github.io/assets/pdf/hw0.pdf) (άσκηση 3).

Το πρόγραμμα χρησιμοποιεί ατέρμονα βρόχο για συνεχή είσοδο δεδομένων από τον χρήστη, ενώ χειρίζεται τις περιπτώσεις όταν δεν παρέχεται η απαιτούμενη είσοδος, στις οποίες και τερματίζει απευθείας. Το πρόγραμμα τερματίζει με κωδικό εξόδου "0" αν εισαχθεί `EOF` κατά την είσοδο του αριστερού κόστους και επιστρέφει κωδικό "1" αν δεν δίνεται το δεξί κόστος.
***

## Περιεχόμενα
- [Εγκατάσταση](#εγκατάσταση)
- [Χρήση](#χρήση)
- [Χρόνος Εκτέλεσης](#Χρόνος-Εκτέλεσης)
- [Υλοποίηση](#Υλοποίηση)
- [Χαρακτηριστικά](#Χαρακτηριστικά)
- [Άδεια](#άδεια)

## Εγκατάσταση
Για να εκτελεστεί επιτυχώς το πρόγραμμα "Trolley Problem" θα χρειαστεί να μετατρέψετε τον πηγαίο κώδικα σε εκτελέσιμο αρχείο. Για να το πραγματοποιήσετε αυτό ακολουθήστε τα παρακάτω βήματα:
### **Πρόσθετες οδηγίες για χρήστες Windows** 
Αν χρησιμοποιείτε Windows, μπορείτε να χρησιμοποιήσετε το Windows Subsystem for Linux (WSL) για να εγκαταστήσετε τον gcc και το git με τα ακόλουθα βήματα:
- Εγκατάσταση WSL: Για να εκτελέσετε το πρόγραμμα, θα χρειαστείτε ένα τερματικό περιβάλλον Linux. Αν δεν έχετε ήδη εγκατεστημένο το WSL, μπορείτε να το εγκαταστήσετε ακολουθώντας τις οδηγίες [εδώ](https://learn.microsoft.com/en-us/windows/wsl/install).

- Ubuntu: Όταν εγκαταστήσετε το WSL ανοίξτε το Ubuntu χρησιμοποιώντας WSL.

- Εγκατάσταση git: Αφού εγκαταστήσετε WSL, μπορείτε να εγκαταστήσετε το git γράφοντας την παρακάτω εντολή στο τερματικό Linux:
```sh
sudo apt update
sudo apt install git
```

- Εγκατάσταση `gcc` και `libgcc-multilib` : Για να μπορέσετε να τρέξετε το πρόγραμμα αυτό σε 32-bit συστήματα θα χρειαστεί να εγκαταστήσετε τον `gcc` και τον `libgcc-multilib` μέσω των εντολών παρακάτω:
```sh
sudo apt install gcc
apt-get install gcc gcc-multilib
```


### **Κατασκευή προγράμματος**
1.  Αντιγράψτε το repository στον τοπικό σας υπολογιστή:
   ```sh
git clone https://github.com/progintro/hw0-Spyrosmaicho.git
```

2.    Μεταβείτε στον φάκελο του προγράμματος trolley.c:  
```sh
cd trolley/src
```
3.  Μεταγλωττίστε το πρόγραμμα trolley.c με την παρακάτω εντολή:
```sh
gcc -O0 -m32 -Wall -Wextra -Werror -pedantic -o trolley trolley.c  
```
Πλέον το πρόγραμμα είναι έτοιμο για εκτέλεση.
***
## Χρήση
Προκειμένου να δουλέψει το πρόγραμμα trolley.c, τρέξτε το χωρίς ορίσματα και όλες οι είσοδοι που θα δώσετε θα είναι μέσω stdin και θα είναι αποκλειστικά αριθμοί από $-10^{18}$ έως $10^{18}$. Για να το εκτελέσετε, χρησιμοποιήστε την παρακάτω εντολή:
```sh
./trolley
```
Το πρόγραμμα θα ζητήσει πρώτα να εισάγετε μια τιμή για το αριστερό κόστος και έπειτα για το δεξί. Με βάση τις τιμές που δώσατε θα εμφανιστεί είτε το μήνυμα "Go left" είτε το μήνυμα "Go right". Στα πρώτα δύο παραδείγματα είναι σημαντικό να αναφερθεί ότι δεν τερματίζεται το πρόγραμμα, απλά αποτελεί ένα παράδειγμα για την κατανόηση της σύγκρισης των δύο κόστων.

**Παράδειγμα 1**
```sh
$ ./trolley
Please enter the cost of going left: 45
Please enter the cost of going right: 56
Go left.
Please enter the cost of going left: 12
Please enter the cost of going right: 12
Go left.
Please enter the cost of going left: -400000000
Please enter the cost of going right: -100000000
Go right.
```
Αξίζει να σημειωθεί ότι οι τιμές που θα δώσει ο χρήστης μπορεί να διαχωρίζονται είτε με space είτε με tab είτε με newline (δεύτερο παράδειγμα).

**Παράδειγμα 2 (Tab,Space,Newline)**
```sh
$ ./trolley
Please enter the cost of going left:      45
Please enter the cost of going right:
12
Go right.
```

Αν δοθεί `EOF`(Ctrl-D) στην αριστερή τιμή εισόδου, το πρόγραμμα θα τερματίσει κανονικά με κωδικό εξόδου 0, εμφανίζοντας "Terminating.". Αν, όμως, δοθεί Ctrl-D αντί για αριθμό για το δεξί κόστος, το πρόγραμμα θα εμφανίσει ότι δεν δόθηκε δεξί κόστος και θα τερματίσει με σφάλμα, δηλαδή με κωδικό εξόδου 1, καθώς αυτό αποτελεί μια είσοδο εκτός προδιαγραφών. 

**Παράδειγμα 3 (EOF για αριστερό κόστος)**
```sh
$ ./trolley
Please enter the cost of going left: (Ctrl-D)
Terminating.
```
**Παράδειγμα 4 (EOF για δεξί κόστος)**
```sh
$ ./trolley
Please enter the cost of going left: 124
Please enter the cost of going right: (Ctrl-D)
No right cost provided.
```
Ακολουθούν δύο ολοκληρωμένα παραδείγματα:
```sh
$ ./trolley
Please enter the cost of going left: -25
Please enter the cost of going right: 35
Go left.
Please enter the cost of going left: 56
Please enter the cost of going right: 3
Go right.
Please enter the cost of going left: (Ctrl-D)
Terminating.

$ ./trolley
Please enter the cost of going left: 546
Please enter the cost of going right: 35
Go right.
Please enter the cost of going left: 3
Please enter the cost of going right: 3
Go left.
Please enter the cost of going left: 33
Please enter the cost of going right: (Ctrl-D)
No right cost provided.
```
Για να ελέγξετε τον κωδικό εξόδου του προγράμματος αφότου τερματιστεί, πληκτρολογήστε την παρακάτω εντολή. 
```sh 
echo$?
``` 
Αυτή θα επιστρέψει 0 για κανονικό τερματισμό (`EOF` στο αριστερό κόστος) και 1 για τερματισμό λόγω μη έγκυρης εισόδου (`EOF` στο δεξί κόστος).

**Παράδειγμα εντολής echo**
```sh
$ ./trolley
Please enter the cost of going left: (Ctrl-D)
Terminating.
$ echo $?
0

$ ./trolley
Please enter the cost of going left: 1245
Please enter the cost of going right: (Ctrl-D)
No right cost provided.
$ echo $?
1
```
## Χρόνος εκτέλεσης
Ο χρόνος εκτέλεσης του συγκεκριμένου προγράμματος πρέπει να είναι κάτω από 1 δευτερόλεπτο για 10.000 επαναλήψεις. Για να μετρηθεί αυτό, αρχικά, πατήστε το παρακάτω link που περιέχει ένα αρχείο με 20.000 αριθμούς που κυμαίνονται από $-10^{18}$ έως $10^{18}$ :

[Time check](https://github.com/Spyrosmaicho/Spyrosmaicho.github.io/edit/main/random)

Μόλις μεταβείτε στην σελίδα με το αρχείο random πατήστε `Ctrl-shift-s` για να το κατεβάσετε στον υπολογιστή σας. Στην συνέχεια ανοίξτε το αρχείο που κατεβάσατε και αποθηκεύστε το στον ίδιο φάκελο με το αρχείο trolley.c. Τέλος, ανοίξτε τον τερματικό με περιβάλλον Linux, μεταβείτε στο φάκελο που περιέχει τα δύο αρχεία (random, trolley.c) και τρέξτε την παράκατω εντολή για να δείτε τον χρόνο εκτέλεσης:

```sh
time ./trolley < random
```
***
## Υλοποίηση
### <ins>Εισαγωγή Βιβλιοθηκών:</ins>

- Οι εντολές #include <stdio.h> και #include <stdlib.h> χρησιμοποιήθηκαν για να εντάξω στο πρόγραμμα μου αυτές τις δύο βιβλιοθήκες της C (stdio.h, stdlib.h), οι οποίες προσφέρουν την δυνατότητα αξιοποίησης βασικών συναρτήσεων εισόδου/εξόδο (scanf,printf) καθώς και της exit( ) για τερματισμό του προγράμματος.


### <ins>Μεταβλητές:</ins>

   - Αντιμετώπιση αριθμών από $-10^{18}$ έως $10^{18}$: Το πρόγραμμα για να μπορέσει να δεχθεί ακέραιους αριθμούς του εύρους &plusmn; $10^{18}$ έπρεπε οι δύο μεταβλητές (αριστερή και δεξιά) να δηλωθούν long long int για να υποστηρίξει τέτοιους μεγάλους αριθμούς, μιας και ο τύπος αυτός είναι δυνατόν να αποθηκεύσει αριθμούς του εύρους $−2^{63}$ έως $2^{63}−1$ που καλύπτει με ευκολία το διάστημα $[-10^{18}$ , $10^{18}$].

- Αποθήκευση αποτελέσματος scanf: Το πρόγραμμα πρέπει να διαχειρίζεται την περίπτωση που εισάγει ο χρήστης EOF είτε στο δεξί είτε στο αριστερό κόστος. Αυτό σημαίνει ότι πρέπει να αναγνωρίζει την τιμή αυτή για να τερματίσει σωστά. Γι' αυτό τον λόγο χρησιμοποίησα την scanf (`scanf("%lld",&left)`) η οποία διαβάζει έναν αριθμό τύπου long long int και  επιστρέφει έναν ακέραιο αριθμό (1 αν διάβασε επιτυχώς την τιμή που δίνει ο χρήστης, 0 αν η τιμή που δίνει ο χρήστης δεν διαβάστηκε, δεν δόθηκε ο αντίστοιχος τύπος δεδομένων και -1 αν δοθεί EOF). Επομένως, αν κρατήσω το αποτέλεσμα της scanf μπορώ να ελέγξω αν δόθηκε EOF. Οπότε, αποθήκευσα την επιστρεφόμενη τιμή της scanf σε μια άλλη μεταβλητή (`check1=scanf("%lld",&left)`) και μέσω ελέγχου της τιμής της μεταβλητής αυτής (`if(check1==EOF)`) εξασφάλισα ότι αν δοθεί το EOF στην είσοδο για την αριστερή ή δεξιά τιμή, το πρόγραμμα θα τερματίσει με τον κατάλληλο κωδικό εξόδου, "0" για κανονικό τερματισμό (`exit(0)`) και "1" (`return 1`) που υποδεικνύει είσοδο εκτός προδιαγραφών.
### <ins>Ατέρμονας βρόχος:</ins>
- Στο πρόγραμμα χρησιμοποιήθηκε η εντολή `while(1)` ούτως ώστε να δημιουργηθεί ένας ατέρμονας βρόχος. Ο τελευταίος ήταν σημαντικό να υλοποιηθεί μιας και το πρόγραμμα έπρεπε να συνεχίσει να ζητάει από τον χρήστη να εισάγει τα κόστη μέχρι να δοθεί ως είσοδος `EOF`. Ο ατέρμονας βρόχος, δηλαδή, επιτρέπει στο πρόγραμμα να εκτελεί τις ερωτήσεις για τα κόστη επαναληπτικά, χωρίς να χρειάζεται να γνωρίζει εκ των προτέρων πόσες φορές θα χρειαστεί να εκτελέσει αυτή τη διαδικασία. Έτσι, ο βρόχος `while(1)` εξασφαλίζει ότι οι ερωτήσεις θα συνεχίζουν να εμφανίζονται για τον χρήστη ασταμάτητα. Επιπλέον, ο βρόχος αυτός δεν έχει έναν προκαθορισμένο αριθμό επαναλήψεων. Αντιθέτως, τερματίζεται με την εντολή `exit(0)` όταν το EOF δίνεται στην είσοδο του αριστερού κόστους ή με την εντολή `return 1` αν το δεξί κόστος είναι ελλιπές. Αυτή η διαδικασία ουσιαστικά κάνει πρόγραμμα να διακόψει τον ατέρμονα βρόχο όταν παρατηρούνται οι συνθήκες για τερματισμό, δηλαδή όταν σταματήσει η εισαγωγή (`EOF` ή ελλιπής είσοδος).

### <ins>Αντιμετώπιση διαχωρισμού τιμών με space,tab,newline:</ins>
- Μια ακόμη πρόκληση που έλυσα ήταν τα κόστη που δίνει ο χρήστης να μπορούν να διαχωρίζονται με space, tab, newline. Αυτό το κατάφερα αξιοποιώντας την scanf, αφού η συγκεκριμένη συνάρτηση αγνοεί κάθε κενό, tab ή αλλαγή γραμμής μέχρι να βρει κάποιο αριθμό, επομένως συμβάλλει ούτως ώστε ο χρήστης να έχει την προαναφερθείσα δυνατότητα εισαγωγής τιμών.

### <ins>Σύγκριση κόστους και εκτύπωση απτελέσματος:</ins>
- Από τη στιμή που το πρόγραμμα πρέπει πάντα να εμφανίζει το μικρότερο κόστος και αν είναι ίσα το αριστερό, χρησιμοποίησα μια σύγκριση των τιμών left και right μέσω του τελεστή <=. Έτσι, αν το αριστερό κόστος είναι μικρότερο ή ίσο με το δεξιό, εκτυπώνεται "Go left.", διαφορετικά "Go right.".

## Χαρακτηριστικά
- *Δυνατότητα επεξεργασίας μεγάλων αριθμών*:  Μπορεί να δεχθεί κόστη με τιμή από $-10^{18}$ έως $10^{18}$.
- *Διαδραστική Λειτουργία*: Ο χρήστης έχει την δυνατότητα να εισάγει τιμές επαναλαμβανόμενα, μιας και το πρόγραμμα χρησιμοποιεί ατέρμονα βρόχο και τερματίζεται όταν φτάσει σε EOF.
- *Ευελιξία στην εισαγωγή τιμών*: Ο χρήστης έχει την δυνατότητα να εισάγει τα κόστη με διαφορετικούς τρόπους (space, tab, newline) αφού το πρόγραμμα τους αγνοεί (λαμβάνει υπόψη μόνο τους αριθμούς χωρίς να έχουν κάποια επιρροή στην είσοδο τα κενά) με αποτέλεσμα να επεξεργάζεται σωστά τις εισόδους αυτές. 
- *Συγκρίσεις*: Εμφανίζεται πάντα η διαδρομή με το χαμηλότερο κόστος και αν είναι ίσες οι τιμές προτείνεται η αριστερή διαδρομή.
- *Αντιμετώπιση σφαλμάτων*: Στην περίπτωση που δοθεί στο πρόγραμμα είσοδος εκτός προδιαγραφών εκείνο τερματίζει με κωδικό εξόδου 1 και ο χρήστης ενημερώνεται για το λάθος μέσω εκτύπωσης αντίστοιχου μηνύματος στην οθόνη.
- *Αποδοτικότητα*: Το πρόγραμμα μπορεί να εκτελέσει μέχρι και 10.000 επαναλήψεις σε λιγότερο από 1 δευτερόλεπτο.
***
## Άδεια(License)

Αυτό το έργο είναι αδειοδοτημένο υπό την **MIT License**. 

### Επιτρέπεται:

- Η χρήση του κώδικα για οποιονδήποτε σκοπό.
- Η τροποποίηση και η προσαρμογή του κώδικα.
- Η διανομή του κώδικα, υπό την προϋπόθεση ότι θα αναφέρεται η αρχική άδεια.

### Δεν επιτρέπεται:

- Η αποκοπή της άδειας από τον κώδικα.

### MIT License

Copyright (c) 2024 Spyros Maichosoglou

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to use the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
***
